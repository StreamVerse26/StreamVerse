<!DOCTYPE html>
<html lang="fi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stream Community</title>

<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;600;800&display=swap" rel="stylesheet">

<style>

body{
margin:0;
font-family:Space Grotesk,sans-serif;
background:#050510;
color:white;
text-align:center;
}

/* HERO */

.hero{
padding:90px 20px;
background:radial-gradient(circle at center,#1a0a30,#050510);
}

.hero h1{
font-size:4.5rem;
margin:0;
background:linear-gradient(90deg,#ff4040,#7a5cff,#ff4040);
-webkit-background-clip:text;
-webkit-text-fill-color:transparent;
}

#liveStatus{
margin-top:15px;
font-weight:600;
color:#ff4040;
}

/* MEMBERS */

.members{
max-width:1200px;
margin:70px auto;
display:grid;
grid-template-columns:repeat(auto-fit,minmax(230px,1fr));
gap:30px;
padding:20px;
}

.card{
background:rgba(255,255,255,0.03);
backdrop-filter:blur(18px);
padding:30px;
border-radius:28px;
transition:.4s;
position:relative;
}

.card:hover{
transform:translateY(-12px);
box-shadow:0 0 60px rgba(255,64,64,.2);
}

.card img{
width:110px;
height:110px;
border-radius:50%;
border:3px solid #ff4040;
}

/* BADGE */

.badge{
position:absolute;
top:18px;
right:18px;
background:#ff4040;
padding:6px 14px;
border-radius:20px;
font-size:12px;
}

/* STREAM PLAYER */

.streamBox{
max-width:1200px;
margin:50px auto;
padding:20px;
}

iframe{
width:100%;
height:620px;
border:none;
border-radius:28px;
box-shadow:0 0 90px rgba(255,64,64,.25);
}

</style>
</head>

<body>

<div class="hero">
<h1>Stream Community</h1>
<p>Creators supporting creators</p>
<div id="liveStatus">Checking live...</div>
</div>

<div class="streamBox" id="streamBox"></div>

<div class="members" id="members"></div>

<script>

/* TEAM CONFIG */

const teamMembers=[

{
name:"StreamerOne",
channel:"twitch_username",
img:"https://static-cdn.jtvnw.net/jtv_user_pictures/xarth/profile_image-70x70.png"
}

];

/* RENDER MEMBERS */

const membersDiv=document.getElementById("members");

teamMembers.forEach(m=>{

let card=document.createElement("div");
card.className="card";

card.innerHTML=`
<img src="${m.img}">
<h3>${m.name}</h3>
<div class="badge" id="${m.channel}-badge">OFFLINE</div>
`;

membersDiv.appendChild(card);

});

/* TWITCH AUTH */

async function getToken(){

const CLIENT_ID="TÃ„HÃ„N";
const CLIENT_SECRET="TÃ„HÃ„N";

const res=await fetch(
"https://id.twitch.tv/oauth2/token",
{
method:"POST",
headers:{
"Content-Type":"application/x-www-form-urlencoded"
},
body:
"client_id="+CLIENT_ID+
"&client_secret="+CLIENT_SECRET+
"&grant_type=client_credentials"
});

const data=await res.json();

return {token:data.access_token, clientID:CLIENT_ID};

}

/* LIVE CHECK */

async function checkLive(){

try{

const auth=await getToken();
let liveChannels=[];

for(let m of teamMembers){

const res=await fetch(
"https://api.twitch.tv/helix/streams?user_login="+m.channel,
{
headers:{
"Client-ID":auth.clientID,
"Authorization":"Bearer "+auth.token
}
});

const data=await res.json();

let badge=document.getElementById(m.channel+"-badge");

if(data.data && data.data.length>0){

badge.innerText="ðŸ”´ LIVE";
liveChannels.push(m.channel);

/* Show stream */
document.getElementById("streamBox").innerHTML=
`<iframe src="https://player.twitch.tv/?channel=${m.channel}&parent=localhost&autoplay=true"></iframe>`;

}else{
badge.innerText="OFFLINE";
}

}

document.getElementById("liveStatus").innerText=
liveChannels.length>0 ?
"ðŸ”´ Live: "+liveChannels.join(", ")
:
"ðŸŸ¢ No one live";

}catch(e){
console.log(e);
}

}

checkLive();
setInterval(checkLive,60000);

</script>

</body>
</html>